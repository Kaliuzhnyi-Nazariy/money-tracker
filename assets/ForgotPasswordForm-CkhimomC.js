import{a as k,v as M,m as E,r as w,c as f,F as V,u as F,h as U,o as B,b as N,e as l,g as t,w as i,f as d,A as T,U as $,i as u,t as p}from"./index-BIhJyTr3.js";import{_ as c}from"./ButtonItem.vue_vue_type_script_setup_true_lang-B0ZZm_Mk.js";import{u as j,_ as v}from"./InputComp.vue_vue_type_script_setup_true_lang-CXoFqrSn.js";const D={class:"bg-second p-5"},L={class:"relative"},O={class:"relative"},z={class:"flex mt-3 gap-10"},I=k({__name:"ForgotPasswordForm",setup(A){const s=M({password:"",confirmPassword:""}),o=E(),h=()=>{if(o.resMess(),!s.password||!s.confirmPassword||s.password===""||s.confirmPassword===""){o.setError("This fields can't be empty");return}s.password!==s.confirmPassword?o.setError("Password do not match"):o.setSuccess("everything is okay")},a=w(!1),r=w(!1),g=()=>{a.value=!a.value},b=()=>{r.value=!r.value},y=f(()=>a.value?"text":"password"),P=f(()=>r.value?"text":"password");V(()=>{a.value=!1});const _=F(),C=U(),{mutation:x,isLoading:m,errorMess:S}=j({mutationFn:()=>_.renewPassword({password:s.password,confirmPassword:s.confirmPassword}),onSuccess:()=>{o.setSuccess("Password has been changed!"),C.replace("authorization")},onError:()=>{o.setError(S)}});return(R,e)=>(B(),N("div",D,[l("form",{onSubmit:e[3]||(e[3]=$(n=>d(x)(),["prevent"]))},[l("span",L,[t(v,{placeholder:"Password","model-value":s.password,"onUpdate:modelValue":e[0]||(e[0]=n=>s.password=n),type:y.value,label:"Password"},null,8,["model-value","type"]),t(c,{"type-of-comp":"button",type:"button",onClick:g,class:"absolute w-7 !h-7 flex justify-center items-center right-1 top-[50%]"},{default:i(()=>[u(p(a.value?"🐵":"🙈"),1)]),_:1})]),l("span",O,[t(v,{class:"mt-3",placeholder:"Confirm password","model-value":s.confirmPassword,"onUpdate:modelValue":e[1]||(e[1]=n=>s.confirmPassword=n),type:P.value,label:"Confirm password"},null,8,["model-value","type"]),t(c,{"type-of-comp":"button",type:"button",onClick:b,class:"absolute w-7 !h-7 flex justify-center items-center right-1 top-[50%] translate-y-[25%]"},{default:i(()=>[u(p(r.value?"🐵":"🙈"),1)]),_:1})]),l("div",z,[t(c,{typeOfComp:"button",type:"button",onClick:e[2]||(e[2]=async()=>{d(o).resMess(),await T(),h()}),class:"hover:bg-white hover:bg-opacity-50 transition-all"},{default:i(()=>e[4]||(e[4]=[u("Check password")])),_:1}),t(c,{typeOfComp:"button",type:"submit",disabled:d(m),class:"hover:bg-white hover:bg-opacity-50 transition-all"},{default:i(()=>[u(p(d(m)?"Loading...":"Change password"),1)]),_:1},8,["disabled"])])],32)]))}});export{I as default};
